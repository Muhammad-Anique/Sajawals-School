<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JazzCash Tokenization</title>
</head>
<body>
    <h1>JazzCash Tokenization</h1>
    
    <!-- Input Form -->
    <form id="tokenizationForm">
        <label for="mobileNo">Mobile Number:</label>
        <input type="text" id="mobileNo" name="mobileNo" placeholder="e.g. 3001234567" required><br><br>

        <label for="orderId">Order ID:</label>
        <input type="text" id="orderId" name="orderId" placeholder="Unique Order ID" required><br><br>

        <label for="amount">Amount:</label>
        <input type="number" id="amount" name="amount" placeholder="e.g. 100" required><br><br>

        <button type="submit">Initiate Tokenization</button>
    </form>

    <script>
        // Ensure the script does not execute until the page is fully loaded
        window.onload = () => {
            const sandboxUrl = "https://sandbox.simpaisa.com"; // Sandbox base URL

            // Add an event listener to the form for submission
            document.getElementById('tokenizationForm').addEventListener('submit', function (event) {
                // Prevent the default form submission behavior
                event.preventDefault();

                // Fetch values from the form
                const mobileNo = document.getElementById('mobileNo').value;
                const orderId = document.getElementById('orderId').value;
                const amount = document.getElementById('amount').value;

                // Configuration variables
                const merchantId = "2000841"; // Replace with your merchant ID
                const productId = "101909";   // Replace with your product ID
                const returnUrl = "your-return-url";   // Replace with your return URL

                // Construct the hosted page URL
                const hostedPageUrl = `${sandboxUrl}/jc/registrationfull?ProductId=${productId}&MobileNo=${mobileNo}&ReturnUrl=${returnUrl}&OrderId=${orderId}&MerchantId=${merchantId}&transactionType=9`;

                // Confirm the redirection with the user
                if (confirm(`You will be redirected to the JazzCash hosted page. Proceed?`)) {
                    window.location.href = hostedPageUrl; // Redirect to the hosted page
                }
            });
        };
    </script>
</body>
</html>
